[2025-03-18 22:24:25,198] INFO main:192 - ------ Command line arguments -------
[2025-03-18 22:24:25,198] INFO main:193 - step                                              : step05_generate_response
[2025-03-18 22:24:25,198] INFO main:194 - input_filename                                    : None
[2025-03-18 22:24:25,198] INFO main:195 - query_args                                        : Compare the fundamental rights in USA Constitution vs. Norway Constitution.
[2025-03-18 22:24:25,198] INFO main:196 - use_rag                                           : True
[2025-03-18 22:24:25,198] INFO main:197 - ------ Config Settings -------
[2025-03-18 22:24:25,198] INFO main:199 - cleaned_text_directory                            : data/cleaned_text
[2025-03-18 22:24:25,198] INFO main:199 - collection_name                                   : collections
[2025-03-18 22:24:25,198] INFO main:199 - embedding_model_name                              : sentence-transformers/all-MiniLM-L6-v2
[2025-03-18 22:24:25,198] INFO main:199 - embeddings_directory                              : data/embeddings
[2025-03-18 22:24:25,198] INFO main:199 - llm_api_url                                       : http://localhost:1234/v1/completions
[2025-03-18 22:24:25,198] INFO main:199 - llm_model_name                                    : llama-3.2-1b-instruct
[2025-03-18 22:24:25,198] INFO main:199 - log_level                                         : debug
[2025-03-18 22:24:25,198] INFO main:199 - raw_input_directory                               : data/raw_input
[2025-03-18 22:24:25,198] INFO main:199 - retriever_min_score_threshold                     : 0.5
[2025-03-18 22:24:25,198] INFO main:199 - vectordb_directory                                : data/vectordb
[2025-03-18 22:24:25,198] INFO main:200 - ------------------------------
[2025-03-18 22:24:25,198] INFO main:46 - Ensured directory exists: data/raw_input
[2025-03-18 22:24:25,198] INFO main:46 - Ensured directory exists: data/cleaned_text
[2025-03-18 22:24:25,198] INFO main:46 - Ensured directory exists: data/embeddings
[2025-03-18 22:24:25,198] INFO main:46 - Ensured directory exists: data/vectordb
[2025-03-18 22:24:25,198] INFO main:131 - [Step 05] Response generation started.
[2025-03-18 22:24:25,198] INFO llm_client:18 - Initialized LLMClient: llm_api_url: http://localhost:1234/v1/completions, model_name: llama-3.2-1b-instruct
[2025-03-18 22:24:25,211] INFO posthog:22 - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
[2025-03-18 22:24:25,484] INFO SentenceTransformer:210 - Use pytorch device_name: mps
[2025-03-18 22:24:25,484] INFO SentenceTransformer:218 - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
[2025-03-18 22:24:26,564] INFO chromadb_retriever:22 - Initialized ChromaDBRetriever: embedding_model_name: sentence-transformers/all-MiniLM-L6-v2, collection_name: collections, score_threshold: 0.5
[2025-03-18 22:24:26,565] INFO rag_query_processor:18 - Initialized RAGQueryProcessor: use_rag: True
[2025-03-18 22:24:26,565] DEBUG rag_query_processor:24 - Received query: Compare the fundamental rights in USA Constitution vs. Norway Constitution.
[2025-03-18 22:24:26,565] INFO rag_query_processor:28 - --------------------------------------------------------------------------------
[2025-03-18 22:24:26,565] INFO rag_query_processor:29 - Using RAG pipeline...
[2025-03-18 22:24:27,452] WARNING local_persistent_hnsw:423 - Number of requested results 5 is greater than number of elements in index 4, updating n_results = 4
[2025-03-18 22:24:27,467] INFO rag_query_processor:36 - ID: A04 - Document4_cleaned.txt
[2025-03-18 22:24:27,468] INFO rag_query_processor:37 - Score: 2.2101
[2025-03-18 22:24:27,468] INFO rag_query_processor:40 - Document: 
[2025-03-18 22:24:27,468] INFO rag_query_processor:41 - Context: title : the constitution of the united states summary : the united states constitution, ratified in 1787, is the foundational legal document of the u. s. government, establishing its framework, guiding principles, and separation of powers among its branches. it begins with the preamble, which articu
[2025-03-18 22:24:27,468] INFO rag_query_processor:42 - --------------------------------------------------------------------------------
[2025-03-18 22:24:27,468] DEBUG rag_query_processor:56 - Prompt to LLM: 
        You are an AI assistant answering user queries using retrieved context.
        If the context is insufficient, say 'I don't know'. 

        Context:
        title : the constitution of the united states summary : the united states constitution, ratified in 1787, is the foundational legal document of the u. s. government, establishing its framework, guiding principles, and separation of powers among its branches. it begins with the preamble, which articu

        Question:
        Compare the fundamental rights in USA Constitution vs. Norway Constitution.
        
[2025-03-18 22:24:27,470] ERROR llm_client:51 - Error querying LLM: HTTPConnectionPool(host='localhost', port=1234): Max retries exceeded with url: /v1/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x14e0e6ba0>: Failed to establish a new connection: [Errno 61] Connection refused'))
[2025-03-18 22:24:27,470] DEBUG rag_query_processor:59 - LLM Response: Error: Could not connect to the LLM.
[2025-03-18 22:24:27,470] INFO main:150 - [Step 05] Response generation completed.
[2025-03-18 22:24:27,470] INFO main:213 - RAG pipeline done
